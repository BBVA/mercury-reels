<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Reels: reels::Targets Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="reels_logo.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">Reels
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacereels.html">reels</a></li><li class="navelem"><a class="el" href="classreels_1_1Targets.html">Targets</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classreels_1_1Targets-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">reels::Targets Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A container class to hold target events and do predictions based on clips.  
 <a href="classreels_1_1Targets.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="reels_8h_source.html">reels.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for reels::Targets:</div>
<div class="dyncontent">
<div class="center"><img src="classreels_1_1Targets__inherit__graph.png" border="0" usemap="#areels_1_1Targets_inherit__map" alt="Inheritance graph"/></div>
<map name="areels_1_1Targets_inherit__map" id="areels_1_1Targets_inherit__map">
<area shape="rect" title="A container class to hold target events and do predictions based on clips." alt="" coords="10,79,119,104"/>
<area shape="rect" href="classreels_1_1TimeUtil.html" title="A common ancestor of Clips and Targets to avoid duplicating time management." alt="" coords="5,5,124,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for reels::Targets:</div>
<div class="dyncontent">
<div class="center"><img src="classreels_1_1Targets__coll__graph.png" border="0" usemap="#areels_1_1Targets_coll__map" alt="Collaboration graph"/></div>
<map name="areels_1_1Targets_coll__map" id="areels_1_1Targets_coll__map">
<area shape="rect" title="A container class to hold target events and do predictions based on clips." alt="" coords="10,79,119,104"/>
<area shape="rect" href="classreels_1_1TimeUtil.html" title="A common ancestor of Clips and Targets to avoid duplicating time management." alt="" coords="5,5,124,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a788c0a0b574885ad093398bea7081455"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a788c0a0b574885ad093398bea7081455">Targets</a> (<a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a> p_clips, <a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a> target)</td></tr>
<tr class="memdesc:a788c0a0b574885ad093398bea7081455"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object from a <a class="el" href="classreels_1_1Clips.html" title="A container class to hold clips (sequences of events).">Clips</a> object and a TargetMap.  <br /></td></tr>
<tr class="separator:a788c0a0b574885ad093398bea7081455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa494e3e344558109a7586f5d46a8c65d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#aa494e3e344558109a7586f5d46a8c65d">insert_target</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_c, <a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_t)</td></tr>
<tr class="memdesc:aa494e3e344558109a7586f5d46a8c65d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility to fill the internal TargetMap target.  <br /></td></tr>
<tr class="separator:aa494e3e344558109a7586f5d46a8c65d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09486f71a7545b25a5a396d87f459d29"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29">fit</a> (<a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a> x_form, <a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a> agg, double p, int depth, bool as_states)</td></tr>
<tr class="memdesc:a09486f71a7545b25a5a396d87f459d29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fit the prediction model.  <br /></td></tr>
<tr class="separator:a09486f71a7545b25a5a396d87f459d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefdb329ae8284265f37c6fee9f3a074a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#aefdb329ae8284265f37c6fee9f3a074a">predict</a> ()</td></tr>
<tr class="memdesc:aefdb329ae8284265f37c6fee9f3a074a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict time to target for all the clients in the <a class="el" href="classreels_1_1Clips.html" title="A container class to hold clips (sequences of events).">Clips</a> object used to fit the model.  <br /></td></tr>
<tr class="separator:aefdb329ae8284265f37c6fee9f3a074a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a553f2ab5dd3bcec26034115b1d917679"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a553f2ab5dd3bcec26034115b1d917679">predict</a> (<a class="el" href="classreels_1_1Clients.html">Clients</a> clients)</td></tr>
<tr class="memdesc:a553f2ab5dd3bcec26034115b1d917679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict time to target for all the clients in a given <a class="el" href="classreels_1_1Clients.html" title="A container class to hold client ids.">Clients</a> object whose clips have been used to fit the model.  <br /></td></tr>
<tr class="separator:a553f2ab5dd3bcec26034115b1d917679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616b36f99f75c5592a7fc82febad23d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a616b36f99f75c5592a7fc82febad23d0">predict</a> (<a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a> p_clips)</td></tr>
<tr class="memdesc:a616b36f99f75c5592a7fc82febad23d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict time to target for a set of clients whose clips are given in a ClipMap.  <br /></td></tr>
<tr class="separator:a616b36f99f75c5592a7fc82febad23d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a428215b5a28ab3c607766c7f57c93f09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a428215b5a28ab3c607766c7f57c93f09">verbose_predict_clip</a> (const <a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a> &amp;client, <a class="el" href="namespacereels.html#a2f6d86b83946e88c6e43e7c1b476f0b4">Clip</a> &amp;clip, <a class="el" href="namespacereels.html#a4a78105f5e060eeedd5b522e287efc9d">TimePoint</a> &amp;obs_time, bool &amp;target_yn, int &amp;longest_seq, uint64_t &amp;n_visits, uint64_t &amp;n_targets, double &amp;targ_mean_t)</td></tr>
<tr class="memdesc:a428215b5a28ab3c607766c7f57c93f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict time for a single Clip returning all kind of prediction related information.  <br /></td></tr>
<tr class="separator:a428215b5a28ab3c607766c7f57c93f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96b6945602462b00a810f3489f3a2288"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a96b6945602462b00a810f3489f3a2288">load</a> (<a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;p_bi)</td></tr>
<tr class="memdesc:a96b6945602462b00a810f3489f3a2288"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a>  <br /></td></tr>
<tr class="separator:a96b6945602462b00a810f3489f3a2288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a9e31f024d5b382fa48eec82bfcb9b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#ac4a9e31f024d5b382fa48eec82bfcb9b">save</a> (<a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;p_bi)</td></tr>
<tr class="memdesc:ac4a9e31f024d5b382fa48eec82bfcb9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the state of an object into a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#aa589037ff1304165b2b9736c08bf3f66" title="A function to push arbitrary raw data into a BinaryImage.">image_put()</a>  <br /></td></tr>
<tr class="separator:ac4a9e31f024d5b382fa48eec82bfcb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1ee6e15e1250af634a8167868c70ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#acc1ee6e15e1250af634a8167868c70ae">update_node</a> (int idx_parent, uint64_t code, bool target, <a class="el" href="namespacereels.html#a0e17cc783e9a6a6e802c866ec6c9f003">ExtFloat</a> time_d)</td></tr>
<tr class="memdesc:acc1ee6e15e1250af634a8167868c70ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update (fit) the CodeTree inserting new nodes as necessary.  <br /></td></tr>
<tr class="separator:acc1ee6e15e1250af634a8167868c70ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dca89e79ea2f68868bd17326b5d19d5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a6dca89e79ea2f68868bd17326b5d19d5">normal_pdf</a> (double x)</td></tr>
<tr class="memdesc:a6dca89e79ea2f68868bd17326b5d19d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Density (pdf) for the normal distribution with mean 0 and standard deviation 1.  <br /></td></tr>
<tr class="separator:a6dca89e79ea2f68868bd17326b5d19d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbff88985aa0045475304bc3a56b0ff3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#afbff88985aa0045475304bc3a56b0ff3">normal_cdf</a> (double x)</td></tr>
<tr class="memdesc:afbff88985aa0045475304bc3a56b0ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cumulative distribution (cdf) for the normal distribution with mean 0 and standard deviation 1.  <br /></td></tr>
<tr class="separator:afbff88985aa0045475304bc3a56b0ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2986f57a1a97ee8e1c7b2ffb816e3350"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a2986f57a1a97ee8e1c7b2ffb816e3350">agresti_coull_upper_bound</a> (uint64_t n_hits, uint64_t n_total)</td></tr>
<tr class="memdesc:a2986f57a1a97ee8e1c7b2ffb816e3350"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upper bound of the Agresti-Coull confidence interval for a binomial proportion.  <br /></td></tr>
<tr class="separator:a2986f57a1a97ee8e1c7b2ffb816e3350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeacf235481ea5d461876c95b9d0288e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#abeacf235481ea5d461876c95b9d0288e">agresti_coull_lower_bound</a> (uint64_t n_hits, uint64_t n_total)</td></tr>
<tr class="memdesc:abeacf235481ea5d461876c95b9d0288e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower bound of the Agresti-Coull confidence interval for a binomial proportion.  <br /></td></tr>
<tr class="separator:abeacf235481ea5d461876c95b9d0288e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b4a813cca93acd4439d1d34036327b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a80b4a813cca93acd4439d1d34036327b">predict_time</a> (<a class="el" href="structreels_1_1CodeTreeNode.html">CodeTreeNode</a> &amp;node)</td></tr>
<tr class="memdesc:a80b4a813cca93acd4439d1d34036327b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict the time to target for a sub-clip that starts at a node.  <br /></td></tr>
<tr class="separator:a80b4a813cca93acd4439d1d34036327b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0711b5c32e23aab8f4656be2484eab1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#aa0711b5c32e23aab8f4656be2484eab1">predict_clip</a> (<a class="el" href="namespacereels.html#a2f6d86b83946e88c6e43e7c1b476f0b4">Clip</a> clip)</td></tr>
<tr class="memdesc:aa0711b5c32e23aab8f4656be2484eab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predict the time to target for a clip.  <br /></td></tr>
<tr class="separator:aa0711b5c32e23aab8f4656be2484eab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af539c8e3fe2bc1a3f77f32e414bfcbfd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#af539c8e3fe2bc1a3f77f32e414bfcbfd">recurse_tree_stats</a> (int depth, int idx, int parent_idx, uint64_t code, <a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;codes_stat)</td></tr>
<tr class="memdesc:af539c8e3fe2bc1a3f77f32e414bfcbfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursive tree exploration updating a CodeInTreeStatMap map.  <br /></td></tr>
<tr class="separator:af539c8e3fe2bc1a3f77f32e414bfcbfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a194426a4f66ca447b433b1483c6f9b08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a194426a4f66ca447b433b1483c6f9b08">num_targets</a> ()</td></tr>
<tr class="memdesc:a194426a4f66ca447b433b1483c6f9b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size of the internal TargetMap.  <br /></td></tr>
<tr class="separator:a194426a4f66ca447b433b1483c6f9b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625045e775f73503e3e9e61b753cfe05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a625045e775f73503e3e9e61b753cfe05">tree_size</a> ()</td></tr>
<tr class="memdesc:a625045e775f73503e3e9e61b753cfe05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size of the internal CodeTree.  <br /></td></tr>
<tr class="separator:a625045e775f73503e3e9e61b753cfe05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e193774de3a2ac5920fcac53aed4b6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a2e193774de3a2ac5920fcac53aed4b6b">clip_map</a> ()</td></tr>
<tr class="memdesc:a2e193774de3a2ac5920fcac53aed4b6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address of the internal ClipMap.  <br /></td></tr>
<tr class="separator:a2e193774de3a2ac5920fcac53aed4b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a903da912dd75677cb03c3c41283d7f9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a1d46156e5435a796e0994528e1cf0c54">pCodeTree</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a903da912dd75677cb03c3c41283d7f9d">p_tree</a> ()</td></tr>
<tr class="memdesc:a903da912dd75677cb03c3c41283d7f9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address of the internal CodeTree.  <br /></td></tr>
<tr class="separator:a903da912dd75677cb03c3c41283d7f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a9bd52e830ad7fe7dd0e5ad07d808e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a0fd1b6d201e1eec9fdbe8940245b5d8d">pTargetMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Targets.html#a0a9bd52e830ad7fe7dd0e5ad07d808e1">p_target</a> ()</td></tr>
<tr class="memdesc:a0a9bd52e830ad7fe7dd0e5ad07d808e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address of the internal TargetMap.  <br /></td></tr>
<tr class="separator:a0a9bd52e830ad7fe7dd0e5ad07d808e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classreels_1_1TimeUtil"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classreels_1_1TimeUtil')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classreels_1_1TimeUtil.html">reels::TimeUtil</a></td></tr>
<tr class="memitem:ae8e19904eaec93a5c9a4f0e6e0792369 inherit pub_methods_classreels_1_1TimeUtil"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a4a78105f5e060eeedd5b522e287efc9d">TimePoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1TimeUtil.html#ae8e19904eaec93a5c9a4f0e6e0792369">get_time</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_t)</td></tr>
<tr class="memdesc:ae8e19904eaec93a5c9a4f0e6e0792369 inherit pub_methods_classreels_1_1TimeUtil"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time as a string to a TimePoint (using the object's time_format).  <br /></td></tr>
<tr class="separator:ae8e19904eaec93a5c9a4f0e6e0792369 inherit pub_methods_classreels_1_1TimeUtil"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae45cac3f4e552d0128d3b82039896456 inherit pub_methods_classreels_1_1TimeUtil"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1TimeUtil.html#ae45cac3f4e552d0128d3b82039896456">set_time_format</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> fmt)</td></tr>
<tr class="memdesc:ae45cac3f4e552d0128d3b82039896456 inherit pub_methods_classreels_1_1TimeUtil"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the public property time_format to simplify the python interface.  <br /></td></tr>
<tr class="separator:ae45cac3f4e552d0128d3b82039896456 inherit pub_methods_classreels_1_1TimeUtil"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classreels_1_1TimeUtil"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classreels_1_1TimeUtil')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classreels_1_1TimeUtil.html">reels::TimeUtil</a></td></tr>
<tr class="memitem:ad026787163f981a528c58a1096ea57fc inherit pub_attribs_classreels_1_1TimeUtil"><td class="memItemLeft" align="right" valign="top"><a id="ad026787163f981a528c58a1096ea57fc" name="ad026787163f981a528c58a1096ea57fc"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>time_format</b> [128] = &quot;%Y-%m-%d %H:%M:%S&quot;</td></tr>
<tr class="memdesc:ad026787163f981a528c58a1096ea57fc inherit pub_attribs_classreels_1_1TimeUtil"><td class="mdescLeft">&#160;</td><td class="mdescRight">Date and time format for insert_row() and define_event() <br /></td></tr>
<tr class="separator:ad026787163f981a528c58a1096ea57fc inherit pub_attribs_classreels_1_1TimeUtil"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A container class to hold target events and do predictions based on clips. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a788c0a0b574885ad093398bea7081455" name="a788c0a0b574885ad093398bea7081455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a788c0a0b574885ad093398bea7081455">&#9670;&#160;</a></span>Targets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">reels::Targets::Targets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a>&#160;</td>
          <td class="paramname"><em>p_clips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object from a <a class="el" href="classreels_1_1Clips.html" title="A container class to hold clips (sequences of events).">Clips</a> object and a TargetMap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_clips</td><td>The address of a <a class="el" href="classreels_1_1Clips.html" title="A container class to hold clips (sequences of events).">Clips</a> object initialized with the clips of a set of clients. </td></tr>
    <tr><td class="paramname">target</td><td>A TargetMap with the even times for a subset of the same clients (those who experienced the target). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abeacf235481ea5d461876c95b9d0288e" name="abeacf235481ea5d461876c95b9d0288e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeacf235481ea5d461876c95b9d0288e">&#9670;&#160;</a></span>agresti_coull_lower_bound()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::agresti_coull_lower_bound </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>n_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>n_total</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lower bound of the Agresti-Coull confidence interval for a binomial proportion. </p>
<p>The confidence level is passed as an argument to the <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a> method, the fit method computes some "binomial_z.*" variables used in this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_hits</td><td>The number of successes. </td></tr>
    <tr><td class="paramname">n_total</td><td>The number of independent trials.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The upper bound of the AC confidence interval. </dd></dl>

</div>
</div>
<a id="a2986f57a1a97ee8e1c7b2ffb816e3350" name="a2986f57a1a97ee8e1c7b2ffb816e3350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2986f57a1a97ee8e1c7b2ffb816e3350">&#9670;&#160;</a></span>agresti_coull_upper_bound()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::agresti_coull_upper_bound </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>n_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>n_total</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upper bound of the Agresti-Coull confidence interval for a binomial proportion. </p>
<p>The confidence level is passed as an argument to the <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a> method, the fit method computes some "binomial_z.*" variables used in this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_hits</td><td>The number of successes. </td></tr>
    <tr><td class="paramname">n_total</td><td>The number of independent trials.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The upper bound of the AC confidence interval. </dd></dl>

</div>
</div>
<a id="a2e193774de3a2ac5920fcac53aed4b6b" name="a2e193774de3a2ac5920fcac53aed4b6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e193774de3a2ac5920fcac53aed4b6b">&#9670;&#160;</a></span>clip_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a> reels::Targets::clip_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The address of the internal ClipMap. </p>
<dl class="section return"><dt>Returns</dt><dd>The address. </dd></dl>

</div>
</div>
<a id="a09486f71a7545b25a5a396d87f459d29" name="a09486f71a7545b25a5a396d87f459d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09486f71a7545b25a5a396d87f459d29">&#9670;&#160;</a></span>fit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Targets::fit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a>&#160;</td>
          <td class="paramname"><em>x_form</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a>&#160;</td>
          <td class="paramname"><em>agg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>as_states</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fit the prediction model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x_form</td><td>A possible transformation of the times. (Currently "log" or "linear".) </td></tr>
    <tr><td class="paramname">agg</td><td>The mechanism used for the aggregation. (Currently "minimax", "mean" or "longest".) </td></tr>
    <tr><td class="paramname">p</td><td>The width of the confidence interval for the binomial proportion used to calculate the lower bound. (E.g., p = 0.5 will estimate a lower bound of a symmetric CI with coverage of 0.5.) </td></tr>
    <tr><td class="paramname">depth</td><td>The maximum depth of the tree (maximum sequence length learned). </td></tr>
    <tr><td class="paramname">as_states</td><td>Treat events as states by removing repeated ones from the ClipMap keeping the time of the first instance only. When used, the ClipMap passed to the constructor by reference will be converted to states as a side effect.</td></tr>
  </table>
  </dd>
</dl>
<p>Fit can only be called once in the life of a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object and <a class="el" href="classreels_1_1Targets.html#aefdb329ae8284265f37c6fee9f3a074a" title="Predict time to target for all the clients in the Clips object used to fit the model.">predict()</a> cannot be called before <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success. Error is already fitted or wrong arguments. </dd></dl>

</div>
</div>
<a id="aa494e3e344558109a7586f5d46a8c65d" name="aa494e3e344558109a7586f5d46a8c65d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa494e3e344558109a7586f5d46a8c65d">&#9670;&#160;</a></span>insert_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Targets::insert_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility to fill the internal TargetMap target. </p>
<p>The TargetMap can be initialized and given to the constructor, or an empty TargetMap can be given to the constructor ans initialized by this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_c</td><td>The "client". A C/Python string representing "the actor". </td></tr>
    <tr><td class="paramname">p_t</td><td>The "time". A timestamp of the event as a C/Python string. (The format is given via <a class="el" href="classreels_1_1TimeUtil.html#ae45cac3f4e552d0128d3b82039896456" title="Sets the public property time_format to simplify the python interface.">set_time_format()</a>.)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on new clients. False if the client is already in the TargetMap or the time is in the wrong format. </dd></dl>

</div>
</div>
<a id="a96b6945602462b00a810f3489f3a2288" name="a96b6945602462b00a810f3489f3a2288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96b6945602462b00a810f3489f3a2288">&#9670;&#160;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Targets::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;&#160;</td>
          <td class="paramname"><em>p_bi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_bi</td><td>The address of a BinaryImage stream containing a previously <a class="el" href="classreels_1_1Targets.html#ac4a9e31f024d5b382fa48eec82bfcb9b" title="Save the state of an object into a base64 mercury-dynamics serialization using image_put()">save()</a>-ed image at the cursor position.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success (Most likely error is a wrong stream). </dd></dl>

</div>
</div>
<a id="afbff88985aa0045475304bc3a56b0ff3" name="afbff88985aa0045475304bc3a56b0ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbff88985aa0045475304bc3a56b0ff3">&#9670;&#160;</a></span>normal_cdf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::normal_cdf </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cumulative distribution (cdf) for the normal distribution with mean 0 and standard deviation 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The quantile.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cumulative probability. </dd></dl>

</div>
</div>
<a id="a6dca89e79ea2f68868bd17326b5d19d5" name="a6dca89e79ea2f68868bd17326b5d19d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dca89e79ea2f68868bd17326b5d19d5">&#9670;&#160;</a></span>normal_pdf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::normal_pdf </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Density (pdf) for the normal distribution with mean 0 and standard deviation 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The quantile.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The density. </dd></dl>

</div>
</div>
<a id="a194426a4f66ca447b433b1483c6f9b08" name="a194426a4f66ca447b433b1483c6f9b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a194426a4f66ca447b433b1483c6f9b08">&#9670;&#160;</a></span>num_targets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int reels::Targets::num_targets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the size of the internal TargetMap. </p>
<dl class="section return"><dt>Returns</dt><dd>Size of the internal TargetMap. </dd></dl>

</div>
</div>
<a id="a0a9bd52e830ad7fe7dd0e5ad07d808e1" name="a0a9bd52e830ad7fe7dd0e5ad07d808e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a9bd52e830ad7fe7dd0e5ad07d808e1">&#9670;&#160;</a></span>p_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a0fd1b6d201e1eec9fdbe8940245b5d8d">pTargetMap</a> reels::Targets::p_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The address of the internal TargetMap. </p>
<dl class="section return"><dt>Returns</dt><dd>The address. </dd></dl>

</div>
</div>
<a id="a903da912dd75677cb03c3c41283d7f9d" name="a903da912dd75677cb03c3c41283d7f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a903da912dd75677cb03c3c41283d7f9d">&#9670;&#160;</a></span>p_tree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a1d46156e5435a796e0994528e1cf0c54">pCodeTree</a> reels::Targets::p_tree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The address of the internal CodeTree. </p>
<dl class="section return"><dt>Returns</dt><dd>The address. </dd></dl>

</div>
</div>
<a id="aefdb329ae8284265f37c6fee9f3a074a" name="aefdb329ae8284265f37c6fee9f3a074a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefdb329ae8284265f37c6fee9f3a074a">&#9670;&#160;</a></span>predict() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a> reels::Targets::predict </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predict time to target for all the clients in the <a class="el" href="classreels_1_1Clips.html" title="A container class to hold clips (sequences of events).">Clips</a> object used to fit the model. </p>
<p><a class="el" href="classreels_1_1Targets.html#aefdb329ae8284265f37c6fee9f3a074a" title="Predict time to target for all the clients in the Clips object used to fit the model.">predict()</a> cannot be called before <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a> and can be called any number of times in all overloaded forms after that.</p>
<dl class="section return"><dt>Returns</dt><dd>A vector with the times. </dd></dl>

</div>
</div>
<a id="a553f2ab5dd3bcec26034115b1d917679" name="a553f2ab5dd3bcec26034115b1d917679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a553f2ab5dd3bcec26034115b1d917679">&#9670;&#160;</a></span>predict() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a> reels::Targets::predict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classreels_1_1Clients.html">Clients</a>&#160;</td>
          <td class="paramname"><em>clients</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predict time to target for all the clients in a given <a class="el" href="classreels_1_1Clients.html" title="A container class to hold client ids.">Clients</a> object whose clips have been used to fit the model. </p>
<p>It will predict the prediction of the zero-length clip (accumulated in the root node) if the client is not found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clients</td><td>A <a class="el" href="classreels_1_1Clients.html" title="A container class to hold client ids.">Clients</a> object with a subset of the clients used to fit the model.</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classreels_1_1Targets.html#aefdb329ae8284265f37c6fee9f3a074a" title="Predict time to target for all the clients in the Clips object used to fit the model.">predict()</a> cannot be called before <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a> and can be called any number of times in all overloaded forms after that.</p>
<dl class="section return"><dt>Returns</dt><dd>A vector with the times. </dd></dl>

</div>
</div>
<a id="a616b36f99f75c5592a7fc82febad23d0" name="a616b36f99f75c5592a7fc82febad23d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616b36f99f75c5592a7fc82febad23d0">&#9670;&#160;</a></span>predict() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#afab3fdb12dfcf2726f495bd074225411">TimesToTarget</a> reels::Targets::predict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a967ca40ad0410dcf5f4ff55206a988ff">pClipMap</a>&#160;</td>
          <td class="paramname"><em>p_clips</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predict time to target for a set of clients whose clips are given in a ClipMap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_clips</td><td>A ClipMap of clients and clips to be used in prediction.</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classreels_1_1Targets.html#aefdb329ae8284265f37c6fee9f3a074a" title="Predict time to target for all the clients in the Clips object used to fit the model.">predict()</a> cannot be called before <a class="el" href="classreels_1_1Targets.html#a09486f71a7545b25a5a396d87f459d29" title="Fit the prediction model.">fit()</a> and can be called any number of times in all overloaded forms after that.</p>
<dl class="section return"><dt>Returns</dt><dd>A vector with the times. </dd></dl>

</div>
</div>
<a id="aa0711b5c32e23aab8f4656be2484eab1" name="aa0711b5c32e23aab8f4656be2484eab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0711b5c32e23aab8f4656be2484eab1">&#9670;&#160;</a></span>predict_clip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::predict_clip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a2f6d86b83946e88c6e43e7c1b476f0b4">Clip</a>&#160;</td>
          <td class="paramname"><em>clip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Predict the time to target for a clip. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clip</td><td>A clip containing a sequence of event codes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The predicted time to the target event. </dd></dl>

</div>
</div>
<a id="a80b4a813cca93acd4439d1d34036327b" name="a80b4a813cca93acd4439d1d34036327b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b4a813cca93acd4439d1d34036327b">&#9670;&#160;</a></span>predict_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Targets::predict_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreels_1_1CodeTreeNode.html">CodeTreeNode</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Predict the time to target for a sub-clip that starts at a node. </p>
<p>This method assumes uniform distribution over time of the events (like Poisson distribution) but weighted by evidence.</p>
<p>Basically, we assume that the observed maximum likelihood time (mu_hat) is the mean (therefore the half) of a uniform distribution U(0, 2*mu_hat) and the whole "event space", if estimated without bias, would be U(0, 2*mu_hat*n_seen/n_target).</p>
<p>Caveat 1. We don't want it unbiased, but biased by evidence, because many estimates will be done, "lucky paths" are a real thing, especially with low number of visits. That is why we use <a class="el" href="classreels_1_1Targets.html#abeacf235481ea5d461876c95b9d0288e" title="Lower bound of the Agresti-Coull confidence interval for a binomial proportion.">agresti_coull_lower_bound()</a> and not n_seen/n_target. Note that, of course, as you reduce the confidence (the p argument of fit), you will make it approach n_seen/n_target.</p>
<p>Caveat 2. We, intentionally bias towards underestimating the urgency. With much evidence, it will be close to unbiased, but with little evidence, if will underrepresent the urgency (proximity of the event happening). This is why minimax will select the most urgent (min) of the biased up values (max).</p>
<p>Caveat 3. mu_hat is numerically more stable if the transformation is log (although the aggregation it is computed in 128 bit floating point arithmetic which should be stable either way) but, in that case mu_hat will not be the mean time, but its geometric mean (since adding logs is multiplying).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>The node in the tree defining the sub-clip.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The predicted time to the target event. </dd></dl>

</div>
</div>
<a id="af539c8e3fe2bc1a3f77f32e414bfcbfd" name="af539c8e3fe2bc1a3f77f32e414bfcbfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af539c8e3fe2bc1a3f77f32e414bfcbfd">&#9670;&#160;</a></span>recurse_tree_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Targets::recurse_tree_stats </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parent_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;&#160;</td>
          <td class="paramname"><em>codes_stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursive tree exploration updating a CodeInTreeStatMap map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth</td><td>The recursion depth </td></tr>
    <tr><td class="paramname">idx</td><td>The index of the current node </td></tr>
    <tr><td class="paramname">parent_idx</td><td>The index of the parent node </td></tr>
    <tr><td class="paramname">code</td><td>The current code </td></tr>
    <tr><td class="paramname">codes_stat</td><td>The CodeInTreeStatMap being updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False on error. </dd></dl>

</div>
</div>
<a id="ac4a9e31f024d5b382fa48eec82bfcb9b" name="ac4a9e31f024d5b382fa48eec82bfcb9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4a9e31f024d5b382fa48eec82bfcb9b">&#9670;&#160;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Targets::save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;&#160;</td>
          <td class="paramname"><em>p_bi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the state of an object into a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#aa589037ff1304165b2b9736c08bf3f66" title="A function to push arbitrary raw data into a BinaryImage.">image_put()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_bi</td><td>The address of a BinaryImage stream that is either empty or has been used only for writing.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success (Most likely error is allocation). </dd></dl>

</div>
</div>
<a id="a625045e775f73503e3e9e61b753cfe05" name="a625045e775f73503e3e9e61b753cfe05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625045e775f73503e3e9e61b753cfe05">&#9670;&#160;</a></span>tree_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int reels::Targets::tree_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the size of the internal CodeTree. </p>
<dl class="section return"><dt>Returns</dt><dd>Size of the internal CodeTree. </dd></dl>

</div>
</div>
<a id="acc1ee6e15e1250af634a8167868c70ae" name="acc1ee6e15e1250af634a8167868c70ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1ee6e15e1250af634a8167868c70ae">&#9670;&#160;</a></span>update_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int reels::Targets::update_node </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx_parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a0e17cc783e9a6a6e802c866ec6c9f003">ExtFloat</a>&#160;</td>
          <td class="paramname"><em>time_d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update (fit) the CodeTree inserting new nodes as necessary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx_parent</td><td>The index of the parent node. For the first insertion, root == 0. For more, returned values of this. </td></tr>
    <tr><td class="paramname">code</td><td>The node will be the child of the parent node whose code is this code. </td></tr>
    <tr><td class="paramname">target</td><td>The target was matched in the clip or not. </td></tr>
    <tr><td class="paramname">time_d</td><td>The time difference from the code to the target (when there is a target, must be 0 otherwise).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the current node. </dd></dl>

</div>
</div>
<a id="a428215b5a28ab3c607766c7f57c93f09" name="a428215b5a28ab3c607766c7f57c93f09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a428215b5a28ab3c607766c7f57c93f09">&#9670;&#160;</a></span>verbose_predict_clip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reels::Targets::verbose_predict_clip </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a> &amp;&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a2f6d86b83946e88c6e43e7c1b476f0b4">Clip</a> &amp;&#160;</td>
          <td class="paramname"><em>clip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4a78105f5e060eeedd5b522e287efc9d">TimePoint</a> &amp;&#160;</td>
          <td class="paramname"><em>obs_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>target_yn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>longest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>n_visits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>n_targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>targ_mean_t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predict time for a single Clip returning all kind of prediction related information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The client hash (needed to see if he fits the target). </td></tr>
    <tr><td class="paramname">clip</td><td>The clip we want to predict </td></tr>
    <tr><td class="paramname">obs_time</td><td>A variable to store the time between the last even and the target when the target is hit. </td></tr>
    <tr><td class="paramname">target_yn</td><td>A variable to store if the target was hit (true) or not (false). </td></tr>
    <tr><td class="paramname">longest_seq</td><td>A variable to store the longest aligned matching sequence stored in the tree. </td></tr>
    <tr><td class="paramname">n_visits</td><td>A variable to store the number of visits for the longest sequence. </td></tr>
    <tr><td class="paramname">n_targets</td><td>A variable to store the number of target hits for the longest sequence. </td></tr>
    <tr><td class="paramname">targ_mean_t</td><td>A variable to store average observed time for hits in the longest sequence. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>reels/<a class="el" href="reels_8h_source.html">reels.h</a></li>
<li>reels/reels.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
