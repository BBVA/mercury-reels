<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Reels: reels::Events Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="reels_logo.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">Reels
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacereels.html">reels</a></li><li class="navelem"><a class="el" href="classreels_1_1Events.html">Events</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classreels_1_1Events-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">reels::Events Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A container class to hold events.  
 <a href="classreels_1_1Events.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="reels_8h_source.html">reels.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a437b2281880b356ccf8586e5a982f4d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a437b2281880b356ccf8586e5a982f4d5">insert_row</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_e, <a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_d, double w)</td></tr>
<tr class="memdesc:a437b2281880b356ccf8586e5a982f4d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a row from a transaction file.  <br /></td></tr>
<tr class="separator:a437b2281880b356ccf8586e5a982f4d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601dc6b767f5fcea7128a1a3280c0db6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a601dc6b767f5fcea7128a1a3280c0db6">define_event</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_e, <a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_d, double w, uint64_t code)</td></tr>
<tr class="memdesc:a601dc6b767f5fcea7128a1a3280c0db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define events explicitly.  <br /></td></tr>
<tr class="separator:a601dc6b767f5fcea7128a1a3280c0db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256e8d27c4ebbd547fe0f12ac08cde30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a8439b64892718b921e015accbfad1478">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a256e8d27c4ebbd547fe0f12ac08cde30">optimize_events</a> (<a class="el" href="classreels_1_1Clips.html">Clips</a> &amp;clips, <a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a> &amp;targets, int num_steps=10, int codes_per_step=5, double threshold=0.0001, <a class="el" href="namespacereels.html#ae76ecaa3940df39d3b8fa491fc62246c">pCodeSet</a> p_force_include=nullptr, <a class="el" href="namespacereels.html#ae76ecaa3940df39d3b8fa491fc62246c">pCodeSet</a> p_force_exclude=nullptr, <a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a> x_form=tr_linear, <a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a> agg=ag_longest, double p=0.5, int depth=1000, bool as_states=true, double exponential_decay=0.00693, double lower_bound_p=0.95, bool log_lift=true)</td></tr>
<tr class="memdesc:a256e8d27c4ebbd547fe0f12ac08cde30"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classreels_1_1Events.html" title="A container class to hold events.">Events</a> optimizer.  <br /></td></tr>
<tr class="separator:a256e8d27c4ebbd547fe0f12ac08cde30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab280c7b4b4fe194570537b3e88c298a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#ab280c7b4b4fe194570537b3e88c298a9">score_model</a> (double &amp;score, double &amp;targ_prop, <a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;codes_stat, bool calc_tree_stats, <a class="el" href="classreels_1_1Clips.html">Clips</a> &amp;clips, <a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a> &amp;targets, <a class="el" href="namespacereels.html#ad23367fd7ac91cfd895fea61134f5e53">EventCodeMap</a> code_dict, <a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a> x_form, <a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a> agg, double p, int depth, bool as_states)</td></tr>
<tr class="memdesc:ab280c7b4b4fe194570537b3e88c298a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal: Do one step of the <a class="el" href="classreels_1_1Events.html#a256e8d27c4ebbd547fe0f12ac08cde30" title="Events optimizer.">optimize_events()</a> method.  <br /></td></tr>
<tr class="separator:ab280c7b4b4fe194570537b3e88c298a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170ec0e95f3b17689259305f4c64f76a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a0003bf321a0a67c2609068f322a72b93">CodeScores</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a170ec0e95f3b17689259305f4c64f76a">get_top_codes</a> (<a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;codes_stat, double targ_prop, double exponential_decay, double lower_bound_p, bool log_lift)</td></tr>
<tr class="memdesc:a170ec0e95f3b17689259305f4c64f76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal: Extract the top top_n codes by lift from a CodeInTreeStatMap map.  <br /></td></tr>
<tr class="separator:a170ec0e95f3b17689259305f4c64f76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cba11f94673a7045f4d9737047788d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a8cba11f94673a7045f4d9737047788d3">linear_correlation</a> (<a class="el" href="namespacereels.html#a085f2a70bd9319a74fcba2295b958e9e">OptimizeEval</a> &amp;ev)</td></tr>
<tr class="memdesc:a8cba11f94673a7045f4d9737047788d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute Pearson linear correlation between predicted and observed in an OptimizeEval.  <br /></td></tr>
<tr class="separator:a8cba11f94673a7045f4d9737047788d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464476e8cc5dec6256e29a97392a957d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a464476e8cc5dec6256e29a97392a957d">load</a> (<a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;p_bi)</td></tr>
<tr class="memdesc:a464476e8cc5dec6256e29a97392a957d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a>  <br /></td></tr>
<tr class="separator:a464476e8cc5dec6256e29a97392a957d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8a6dec443d149cc7dc5154348185f96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#ab8a6dec443d149cc7dc5154348185f96">load</a> (<a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;p_bi, int &amp;c_block, int &amp;c_ofs)</td></tr>
<tr class="memdesc:ab8a6dec443d149cc7dc5154348185f96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a>  <br /></td></tr>
<tr class="separator:ab8a6dec443d149cc7dc5154348185f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f1ba063a2cb7a124ee04432ded5c81"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a83f1ba063a2cb7a124ee04432ded5c81">save</a> (<a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;p_bi)</td></tr>
<tr class="memdesc:a83f1ba063a2cb7a124ee04432ded5c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the state of an object into a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#aa589037ff1304165b2b9736c08bf3f66" title="A function to push arbitrary raw data into a BinaryImage.">image_put()</a>  <br /></td></tr>
<tr class="separator:a83f1ba063a2cb7a124ee04432ded5c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb8fdeaf66f9097c2df4a0d06e56c746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#aeb8fdeaf66f9097c2df4a0d06e56c746">set_max_num_events</a> (int max_events)</td></tr>
<tr class="memdesc:aeb8fdeaf66f9097c2df4a0d06e56c746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the public property max_num_events to simplify the python interface.  <br /></td></tr>
<tr class="separator:aeb8fdeaf66f9097c2df4a0d06e56c746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60b1cc227efd4b5839f01cd0af8d11a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#ae60b1cc227efd4b5839f01cd0af8d11a">set_store_strings</a> (bool store)</td></tr>
<tr class="memdesc:ae60b1cc227efd4b5839f01cd0af8d11a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the public property store_strings to simplify the python interface.  <br /></td></tr>
<tr class="separator:ae60b1cc227efd4b5839f01cd0af8d11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a43a9ee44caf7580e943038e44ffa16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a7a43a9ee44caf7580e943038e44ffa16">add_str</a> (<a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a> p_str)</td></tr>
<tr class="memdesc:a7a43a9ee44caf7580e943038e44ffa16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a new string and push it into the StringUsageMap.  <br /></td></tr>
<tr class="separator:a7a43a9ee44caf7580e943038e44ffa16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e13b0bf07486252e86e553d3c45b664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a5e13b0bf07486252e86e553d3c45b664">erase_str</a> (<a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a> hash)</td></tr>
<tr class="memdesc:a5e13b0bf07486252e86e553d3c45b664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a string from the StringUsageMap by decreasing its use count and destroying it if not used anymore.  <br /></td></tr>
<tr class="separator:a5e13b0bf07486252e86e553d3c45b664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a42c1d6ad1d4250911ab9ce8d00f39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacereels.html#a8439b64892718b921e015accbfad1478">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#ae3a42c1d6ad1d4250911ab9ce8d00f39">get_str</a> (<a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a> hash)</td></tr>
<tr class="memdesc:ae3a42c1d6ad1d4250911ab9ce8d00f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a string content from its hash value.  <br /></td></tr>
<tr class="separator:ae3a42c1d6ad1d4250911ab9ce8d00f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf53cb53fa984f0237d9cada3364c30"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a0bf53cb53fa984f0237d9cada3364c30">event_code</a> (<a class="el" href="structreels_1_1BinEventPt.html">BinEventPt</a> &amp;ept)</td></tr>
<tr class="memdesc:a0bf53cb53fa984f0237d9cada3364c30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the code associated to an <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> if found in the object.  <br /></td></tr>
<tr class="separator:a0bf53cb53fa984f0237d9cada3364c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5249983ac63ead8eeecc5b6de7fb1fee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a5249983ac63ead8eeecc5b6de7fb1fee">num_events</a> ()</td></tr>
<tr class="memdesc:a5249983ac63ead8eeecc5b6de7fb1fee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of events stored in the object.  <br /></td></tr>
<tr class="separator:a5249983ac63ead8eeecc5b6de7fb1fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ecb634353f7b3f1d3867b2e51c50a6e"><td class="memItemLeft" align="right" valign="top">EventMap::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a4ecb634353f7b3f1d3867b2e51c50a6e">events_begin</a> ()</td></tr>
<tr class="memdesc:a4ecb634353f7b3f1d3867b2e51c50a6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the EventMap::iterator to the first elements in the private variable .events.  <br /></td></tr>
<tr class="separator:a4ecb634353f7b3f1d3867b2e51c50a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aba01818244dd48315fe524234e3506"><td class="memItemLeft" align="right" valign="top">EventMap::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classreels_1_1Events.html#a3aba01818244dd48315fe524234e3506">events_next_after_find</a> (<a class="el" href="structreels_1_1BinEventPt.html">BinEventPt</a> &amp;ept)</td></tr>
<tr class="memdesc:a3aba01818244dd48315fe524234e3506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the EventMap::iterator to the next <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> after matching ev or nullptr if not found or is last.  <br /></td></tr>
<tr class="separator:a3aba01818244dd48315fe524234e3506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9230f0a37efd84255d1abc0c9d158b1d"><td class="memItemLeft" align="right" valign="top"><a id="a9230f0a37efd84255d1abc0c9d158b1d" name="a9230f0a37efd84255d1abc0c9d158b1d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>store_strings</b> = true</td></tr>
<tr class="memdesc:a9230f0a37efd84255d1abc0c9d158b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, the object stores the string values. <br /></td></tr>
<tr class="separator:a9230f0a37efd84255d1abc0c9d158b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd8afb0326fc16de30c37b930329c322"><td class="memItemLeft" align="right" valign="top"><a id="afd8afb0326fc16de30c37b930329c322" name="afd8afb0326fc16de30c37b930329c322"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>max_num_events</b> = DEFAULT_NUM_EVENTS</td></tr>
<tr class="memdesc:afd8afb0326fc16de30c37b930329c322"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of recurrent event stored via <a class="el" href="classreels_1_1Events.html#a437b2281880b356ccf8586e5a982f4d5" title="Process a row from a transaction file.">insert_row()</a> <br /></td></tr>
<tr class="separator:afd8afb0326fc16de30c37b930329c322"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A container class to hold events. </p>
<p>This class has two different modes, in both cases, it is constructed empty and the public properties store_strings, time_format and max_num_events can be set after construction. </p><pre class="fragment">1. The object identifies recurring events from a sequence of transactions passed to the object using insert_row()
2. The object is given the events as a series of define_event() calls
</pre><p> To simplify the Python interface, the object has <a class="el" href="classreels_1_1Events.html#aeb8fdeaf66f9097c2df4a0d06e56c746" title="Sets the public property max_num_events to simplify the python interface.">set_max_num_events()</a> and <a class="el" href="classreels_1_1Events.html#ae60b1cc227efd4b5839f01cd0af8d11a" title="Sets the public property store_strings to simplify the python interface.">set_store_strings()</a> as methods. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7a43a9ee44caf7580e943038e44ffa16" name="a7a43a9ee44caf7580e943038e44ffa16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a43a9ee44caf7580e943038e44ffa16">&#9670;&#160;</a></span>add_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a> reels::Events::add_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Define a new string and push it into the StringUsageMap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_str</td><td>The string to be added.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The hash. </dd></dl>

</div>
</div>
<a id="a601dc6b767f5fcea7128a1a3280c0db6" name="a601dc6b767f5fcea7128a1a3280c0db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a601dc6b767f5fcea7128a1a3280c0db6">&#9670;&#160;</a></span>define_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Events::define_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define events explicitly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_e</td><td>The "emitter". A C/Python string representing "owner of event". </td></tr>
    <tr><td class="paramname">p_d</td><td>The "description". A C/Python string representing "the event". </td></tr>
    <tr><td class="paramname">w</td><td>The "weight". A double representing a weight of the event. </td></tr>
    <tr><td class="paramname">code</td><td>A unique code number identifying the event.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success.</dd></dl>
<p>Caveat**: <a class="el" href="classreels_1_1Events.html#a437b2281880b356ccf8586e5a982f4d5" title="Process a row from a transaction file.">insert_row()</a> and <a class="el" href="classreels_1_1Events.html#a601dc6b767f5fcea7128a1a3280c0db6" title="Define events explicitly.">define_event()</a> should not be mixed. The former is for event discovery and the latter for explicit definition. A set of events is build either one way or the other. </p>

</div>
</div>
<a id="a5e13b0bf07486252e86e553d3c45b664" name="a5e13b0bf07486252e86e553d3c45b664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e13b0bf07486252e86e553d3c45b664">&#9670;&#160;</a></span>erase_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void reels::Events::erase_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a string from the StringUsageMap by decreasing its use count and destroying it if not used anymore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>hash(key) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0bf53cb53fa984f0237d9cada3364c30" name="a0bf53cb53fa984f0237d9cada3364c30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf53cb53fa984f0237d9cada3364c30">&#9670;&#160;</a></span>event_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t reels::Events::event_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreels_1_1BinEventPt.html">BinEventPt</a> &amp;&#160;</td>
          <td class="paramname"><em>ept</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the code associated to an <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> if found in the object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ept</td><td>The <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> searched.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The code if found, or zero if not. </dd></dl>

</div>
</div>
<a id="a4ecb634353f7b3f1d3867b2e51c50a6e" name="a4ecb634353f7b3f1d3867b2e51c50a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ecb634353f7b3f1d3867b2e51c50a6e">&#9670;&#160;</a></span>events_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">EventMap::iterator reels::Events::events_begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the EventMap::iterator to the first elements in the private variable .events. </p>
<dl class="section return"><dt>Returns</dt><dd>The iterator to the first element. </dd></dl>

</div>
</div>
<a id="a3aba01818244dd48315fe524234e3506" name="a3aba01818244dd48315fe524234e3506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aba01818244dd48315fe524234e3506">&#9670;&#160;</a></span>events_next_after_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">EventMap::iterator reels::Events::events_next_after_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreels_1_1BinEventPt.html">BinEventPt</a> &amp;&#160;</td>
          <td class="paramname"><em>ept</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the EventMap::iterator to the next <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> after matching ev or nullptr if not found or is last. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ept</td><td>The <a class="el" href="structreels_1_1BinEventPt.html" title="The binary representation of an event as stored in a transaction file.">BinEventPt</a> searched.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The iterator to the next element after the matching element. </dd></dl>

</div>
</div>
<a id="ae3a42c1d6ad1d4250911ab9ce8d00f39" name="ae3a42c1d6ad1d4250911ab9ce8d00f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a42c1d6ad1d4250911ab9ce8d00f39">&#9670;&#160;</a></span>get_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a8439b64892718b921e015accbfad1478">String</a> reels::Events::get_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a60510fbcbc3a367de0a7061ea5a4a0fa">ElementHash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a string content from its hash value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>hash(key)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string if found, or a single EOT (End of transmission) character if not found. (An empty string is usable.) </dd></dl>

</div>
</div>
<a id="a170ec0e95f3b17689259305f4c64f76a" name="a170ec0e95f3b17689259305f4c64f76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a170ec0e95f3b17689259305f4c64f76a">&#9670;&#160;</a></span>get_top_codes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a0003bf321a0a67c2609068f322a72b93">CodeScores</a> reels::Events::get_top_codes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;&#160;</td>
          <td class="paramname"><em>codes_stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>targ_prop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>exponential_decay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lower_bound_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>log_lift</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal: Extract the top top_n codes by lift from a CodeInTreeStatMap map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">codes_stat</td><td>A complete CodeInTreeStatMap computed by <a class="el" href="classreels_1_1Events.html#ab280c7b4b4fe194570537b3e88c298a9" title="Internal: Do one step of the optimize_events() method.">score_model()</a>. </td></tr>
    <tr><td class="paramname">targ_prop</td><td>The targets/seen proportion at the tree root. </td></tr>
    <tr><td class="paramname">exponential_decay</td><td>Exponential Decay Factor applied to the internal score in terms of depth. That score selects what codes enter the model. The decay is applied to the average tree depth. 0 is no decay, default value = 0.00693 decays to 0.5 in 100 steps. </td></tr>
    <tr><td class="paramname">lower_bound_p</td><td>Another p for lower bound, but applied to the scoring process rather than the model. </td></tr>
    <tr><td class="paramname">log_lift</td><td>A boolean to set if lift (= LB(included)/LB(after inclusion)) is log() transformed or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A sorted (by lift) vector of codes top first. </dd></dl>

</div>
</div>
<a id="a437b2281880b356ccf8586e5a982f4d5" name="a437b2281880b356ccf8586e5a982f4d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a437b2281880b356ccf8586e5a982f4d5">&#9670;&#160;</a></span>insert_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reels::Events::insert_row </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a4c9a27f22e0b05c11ca77c43f0029ac1">pChar</a>&#160;</td>
          <td class="paramname"><em>p_d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a row from a transaction file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_e</td><td>The "emitter". A C/Python string representing "owner of event". </td></tr>
    <tr><td class="paramname">p_d</td><td>The "description". A C/Python string representing "the event". </td></tr>
    <tr><td class="paramname">w</td><td>The "weight". A double representing a weight of the event.</td></tr>
  </table>
  </dd>
</dl>
<p>Caveat**: <a class="el" href="classreels_1_1Events.html#a437b2281880b356ccf8586e5a982f4d5" title="Process a row from a transaction file.">insert_row()</a> and <a class="el" href="classreels_1_1Events.html#a601dc6b767f5fcea7128a1a3280c0db6" title="Define events explicitly.">define_event()</a> should not be mixed. The former is for event discovery and the latter for explicit definition. A set of events is build either one way or the other. </p>

</div>
</div>
<a id="a8cba11f94673a7045f4d9737047788d3" name="a8cba11f94673a7045f4d9737047788d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cba11f94673a7045f4d9737047788d3">&#9670;&#160;</a></span>linear_correlation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double reels::Events::linear_correlation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#a085f2a70bd9319a74fcba2295b958e9e">OptimizeEval</a> &amp;&#160;</td>
          <td class="paramname"><em>ev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute Pearson linear correlation between predicted and observed in an OptimizeEval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td>The vector of <a class="el" href="structreels_1_1OptimizeEvalItem.html" title="OptimizeEvalItem: A structure to compare predicted and observed.">OptimizeEvalItem</a> containing t_obs (observed) and t_hat (predicted) values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The linear correlation. </dd></dl>

</div>
</div>
<a id="a464476e8cc5dec6256e29a97392a957d" name="a464476e8cc5dec6256e29a97392a957d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464476e8cc5dec6256e29a97392a957d">&#9670;&#160;</a></span>load() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Events::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;&#160;</td>
          <td class="paramname"><em>p_bi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_bi</td><td>The address of a BinaryImage stream containing a previously <a class="el" href="classreels_1_1Events.html#a83f1ba063a2cb7a124ee04432ded5c81" title="Save the state of an object into a base64 mercury-dynamics serialization using image_put()">save()</a>-ed image at the cursor position.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success (Most likely error is a wrong stream). </dd></dl>

</div>
</div>
<a id="ab8a6dec443d149cc7dc5154348185f96" name="ab8a6dec443d149cc7dc5154348185f96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8a6dec443d149cc7dc5154348185f96">&#9670;&#160;</a></span>load() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Events::load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;&#160;</td>
          <td class="paramname"><em>p_bi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>c_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>c_ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the state of an object from a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#af8e91bb1d1a511412c0ddc5bb3b490c5" title="A function to get an arbitrary raw data block from a BinaryImage.">image_get()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_bi</td><td>The address of a BinaryImage stream containing a previously <a class="el" href="classreels_1_1Events.html#a83f1ba063a2cb7a124ee04432ded5c81" title="Save the state of an object into a base64 mercury-dynamics serialization using image_put()">save()</a>-ed image at the cursor position. </td></tr>
    <tr><td class="paramname">c_block</td><td>The current reading cursor (block number) required only for nested use of <a class="el" href="classreels_1_1Events.html#a464476e8cc5dec6256e29a97392a957d" title="Load the state of an object from a base64 mercury-dynamics serialization using image_get()">load()</a>. </td></tr>
    <tr><td class="paramname">c_ofs</td><td>The current reading cursor (offset in block) required only for nested use of <a class="el" href="classreels_1_1Events.html#a464476e8cc5dec6256e29a97392a957d" title="Load the state of an object from a base64 mercury-dynamics serialization using image_get()">load()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success (Most likely error is a wrong stream). </dd></dl>

</div>
</div>
<a id="a5249983ac63ead8eeecc5b6de7fb1fee" name="a5249983ac63ead8eeecc5b6de7fb1fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5249983ac63ead8eeecc5b6de7fb1fee">&#9670;&#160;</a></span>num_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int reels::Events::num_events </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the number of events stored in the object. </p>
<dl class="section return"><dt>Returns</dt><dd>The size of the internal <a class="el" href="namespacereels.html#a753be4488a8c210f29ee5ccd95f672b9" title="EventMap: A map from hashes in an BinEventPt to usage data defines the info about an event.">EventMap()</a>. </dd></dl>

</div>
</div>
<a id="a256e8d27c4ebbd547fe0f12ac08cde30" name="a256e8d27c4ebbd547fe0f12ac08cde30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256e8d27c4ebbd547fe0f12ac08cde30">&#9670;&#160;</a></span>optimize_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacereels.html#a8439b64892718b921e015accbfad1478">String</a> reels::Events::optimize_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classreels_1_1Clips.html">Clips</a> &amp;&#160;</td>
          <td class="paramname"><em>clips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a> &amp;&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_steps</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>codes_per_step</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>0.0001</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ae76ecaa3940df39d3b8fa491fc62246c">pCodeSet</a>&#160;</td>
          <td class="paramname"><em>p_force_include</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ae76ecaa3940df39d3b8fa491fc62246c">pCodeSet</a>&#160;</td>
          <td class="paramname"><em>p_force_exclude</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a>&#160;</td>
          <td class="paramname"><em>x_form</em> = <code>tr_linear</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a>&#160;</td>
          <td class="paramname"><em>agg</em> = <code>ag_longest</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>p</em> = <code>0.5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>as_states</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>exponential_decay</em> = <code>0.00693</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lower_bound_p</em> = <code>0.95</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>log_lift</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classreels_1_1Events.html" title="A container class to hold events.">Events</a> optimizer. </p>
<p>Optimizes the events to maximize prediction signal. (F1 score over same number of positives.) It converts code values many-to-one trying to group event codes into categories that represent similar events.</p>
<p>Before starting, a non-optimized <a class="el" href="classreels_1_1Events.html" title="A container class to hold events.">Events</a> object must be populated with an initial set of codes we want to reduce by assigning new many-to-one codes to them.</p>
<p>The algorithm initially removes all codes not found in the clips object. This completely removes them.</p>
<p>The algorithm builds a list of most promising (not already used) codes at the beginning of each step by full tree search. From that list, each code is tried downwards as {noise, new_code, last_code} for score improvement above threshold up to codes_per_step steps. And assigned a new code accordingly. The codes assigned become part of the internal EventCodeMap and in the next step they will replace their old values.</p>
<p>When the algorithm finishes, the internal EventCodeMap is used to rename the object codes and the whole process is reported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clips</td><td>A clips object with the same codes and clips for a set of clients whose prediction we optimize. </td></tr>
    <tr><td class="paramname">targets</td><td>The target events in a TargetMap object in the same format expected by a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object. (Internally a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object will be used to make the predictions we want to optimize.) </td></tr>
    <tr><td class="paramname">num_steps</td><td>The number of steps to iterate. The method will stop early if no codes are found at a step. </td></tr>
    <tr><td class="paramname">codes_per_step</td><td>The number of codes to be tried from the top of the priority list at each step. </td></tr>
    <tr><td class="paramname">threshold</td><td>A minimum threshold, below which a score change is not considered improvement. </td></tr>
    <tr><td class="paramname">p_force_include</td><td>An optional pointer to a set of codes that must be included before starting. </td></tr>
    <tr><td class="paramname">p_force_exclude</td><td>An optional pointer to a set of codes that will excluded and set to the base code. </td></tr>
    <tr><td class="paramname">x_form</td><td>The x_form argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">agg</td><td>The agg argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">p</td><td>The p argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">depth</td><td>The depth argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">as_states</td><td>The as_states argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">exponential_decay</td><td>Exponential Decay Factor applied to the internal score in terms of depth. That score selects what codes enter the model. The decay is applied to the average tree depth. 0 is no decay, default value = 0.00693 decays to 0.5 in 100 steps. </td></tr>
    <tr><td class="paramname">lower_bound_p</td><td>Another p for lower bound, but applied to the scoring process rather than the model. </td></tr>
    <tr><td class="paramname">log_lift</td><td>A boolean to set if lift (= LB(included)/LB(after inclusion)) is log() transformed or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <br  />
 separated report string that contains either "ERROR" or "success" as the first line. </dd></dl>

</div>
</div>
<a id="a83f1ba063a2cb7a124ee04432ded5c81" name="a83f1ba063a2cb7a124ee04432ded5c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f1ba063a2cb7a124ee04432ded5c81">&#9670;&#160;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Events::save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ac5c80b0d8cbac5bce1bdf61c9251cc75">pBinaryImage</a> &amp;&#160;</td>
          <td class="paramname"><em>p_bi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the state of an object into a base64 mercury-dynamics serialization using <a class="el" href="namespacereels.html#aa589037ff1304165b2b9736c08bf3f66" title="A function to push arbitrary raw data into a BinaryImage.">image_put()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_bi</td><td>The address of a BinaryImage stream that is either empty or has been used only for writing.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success (Most likely error is allocation). </dd></dl>

</div>
</div>
<a id="ab280c7b4b4fe194570537b3e88c298a9" name="ab280c7b4b4fe194570537b3e88c298a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab280c7b4b4fe194570537b3e88c298a9">&#9670;&#160;</a></span>score_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reels::Events::score_model </td>
          <td>(</td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>targ_prop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad8514b34ba2d1a7ef5b6ed500479ed56">CodeInTreeStatMap</a> &amp;&#160;</td>
          <td class="paramname"><em>codes_stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>calc_tree_stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classreels_1_1Clips.html">Clips</a> &amp;&#160;</td>
          <td class="paramname"><em>clips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad37c6476c649ff89a1e3b08ae308ac18">TargetMap</a> &amp;&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad23367fd7ac91cfd895fea61134f5e53">EventCodeMap</a>&#160;</td>
          <td class="paramname"><em>code_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#ad44e06140c2e753acec63a0c7f59fa06">Transform</a>&#160;</td>
          <td class="paramname"><em>x_form</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacereels.html#af9e843e456fd6d18c38b1758c8258946">Aggregate</a>&#160;</td>
          <td class="paramname"><em>agg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>as_states</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal: Do one step of the <a class="el" href="classreels_1_1Events.html#a256e8d27c4ebbd547fe0f12ac08cde30" title="Events optimizer.">optimize_events()</a> method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">score</td><td>Returns score by reference. </td></tr>
    <tr><td class="paramname">targ_prop</td><td>Returns the targets/seen proportion at the tree root by reference (used by get_top_codes). </td></tr>
    <tr><td class="paramname">codes_stat</td><td>Returns a complete CodeInTreeStatMap if calc_tree_stats is true. </td></tr>
    <tr><td class="paramname">calc_tree_stats</td><td>Complete a tree search (if true) or just evaluate the score if not. </td></tr>
    <tr><td class="paramname">clips</td><td>A clips object with the same codes and clips for a set of clients whose prediction we optimize. </td></tr>
    <tr><td class="paramname">targets</td><td>The target events in a TargetMap object in the same format expected by a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object. (Internally a <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object will be used to make the predictions we want to optimize.) </td></tr>
    <tr><td class="paramname">code_dict</td><td>A dictionary of code transformations to be applied to a copy of the clips before fitting. </td></tr>
    <tr><td class="paramname">x_form</td><td>The x_form argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">agg</td><td>The agg argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">p</td><td>The p argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">depth</td><td>The depth argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model. </td></tr>
    <tr><td class="paramname">as_states</td><td>The as_states argument to fit the internal <a class="el" href="classreels_1_1Targets.html" title="A container class to hold target events and do predictions based on clips.">Targets</a> object prediction model.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False on error. </dd></dl>

</div>
</div>
<a id="aeb8fdeaf66f9097c2df4a0d06e56c746" name="aeb8fdeaf66f9097c2df4a0d06e56c746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb8fdeaf66f9097c2df4a0d06e56c746">&#9670;&#160;</a></span>set_max_num_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void reels::Events::set_max_num_events </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_events</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the public property max_num_events to simplify the python interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_events</td><td>The value to apply to max_num_events. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae60b1cc227efd4b5839f01cd0af8d11a" name="ae60b1cc227efd4b5839f01cd0af8d11a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae60b1cc227efd4b5839f01cd0af8d11a">&#9670;&#160;</a></span>set_store_strings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void reels::Events::set_store_strings </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>store</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the public property store_strings to simplify the python interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store</td><td>True for storing the string contents. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>reels/<a class="el" href="reels_8h_source.html">reels.h</a></li>
<li>reels/reels.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
